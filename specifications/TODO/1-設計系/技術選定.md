#

- 決める項目リストを作りたい。それに従って決める。
- 例えば以下を含めるなど
  - IaC
  - インフラ構成
  - デプロイ先
  - デプロイ方法
  - テスト方法
  - テストカバレッジ
  - リリース方法
  - バージョン管理
  - チーム開発
  - チーム開発のためのツール
  - チーム開発のためのルール
  - チーム開発のためのコミュニケーション
  - チーム開発のためのドキュメント
  - チーム開発のためのコードレビュー

## 以下old

- これよさそう <https://www.next-nav.com/?ref=dailydev>
- 必要に応じてマイグレーションしていく方式にする

|             | 最初 | 移行先例 |
| ---         | --- | --- |
| Git         | GitHub | |
| CI          | GitHub Actions、lefthook的な何か（他のもいいかも） | |
| テスト       | VRT（Chromatic）、e2e、Bunのテスト、リント（TS、ESLint、ls-lint、etc）、他よいクラウド連携とかテスト管理SaaS等あれば | |
| サーバー      | vercel | GCPかAWSのあれこれ |
| CDN          | cloudflare。必要ならD1やKVとかのインフラも使う | |
| DB          | 検討 |  |
| バックエンドFW | Next.jsかHONO | GoかKotlinのあれこれ |
| ORM          | PrismaかDrizzleかKysely | GoかKotlinのあれこれ |
| リクエストバリデーション | zod | GoかKotlinのあれこれ |
| フロントFW    | Next.jsかHONO | qwikかあれこれ |
| ルーティング   | 何かget側、パース側いずれも型安全なやつ探す | |
| CSS          | tailwind | CSSモジュールかあれこれ |
| コンポーネントライブラリ | codecademy/gamutなど | 自前 |
| ログイン       | next/auth類とかFirebase Auth（メールアドレス/Twitter/Google） | |
| API種別       | GraphQL | |
| APIクライアント | Apollo系かreact-queryか検討 | |
| フォーム       | react-hook-form + zod | |
| i18n          | next-i18next か何か型安全なやつ | |
| 国際化実現方式  | できればサブドメインによるルーティング | |
| 課金          | stripeでよさそう | |
| 他           | 他コンポーネントライブラリ見て得た知見を組み込んでほしい | |

## 選定基準

- インフラ
  - まずは簡単に…
  - 国際化のルーティング分けは、検索結果やOGPにその国の言語を反映してほしいのでドメインかサブパスルーティングがよさそうだけど、ヘッダでも反映してくれたりしそう。調べてから決める
    - ちなみにメルカリはサブドメインルーティング
- バック
  - 最初は大量アクセス無いから簡単でいい。後で必要なら別に移行すればいい。移行もまた勉強になるし。
- フロント
  - フロントの見た目は音楽とかコード進行とかのメンタルモデルに合わせたい。なのであまり既存のコンポーネントライブラリの出る幕は無いと思う。codecademy/gamutはもしかしたら合うかもなので最初使ってみてもいいかもだけど、たぶん後で剥がすなどする。
    - コンポーネントライブラリは、react-hook-formが絡むと面倒なので、絡ませたくない。フォーム系コンポーネントではライブラリは使わない案でいい気がする。tailwindでOK
  - tailwindは一度離れたけど、やっぱり便利なので使ってもいいと思う。最終的にはCSS Moduleに移行してもいいかも。
  - APIクライアントは「クライアントキャッシュが効く」、「GraphQL周りのコードを自動生成ができる」を満たしたい
- というかdrizzleとか使ってなおかつd1使ったら、d1のマイグレーションできんのか問題があるんだったな？調査のやつ

## DB検討対象

- AWS Aurora
- AWS DynamoDB
- AWS S3
- Azure Blob
- Convex
- Couchbase
- Fauna
- Firebase
- MongoDB
- PlanetScale
- PostgreSQL
- Redis (Upstash)
- Supabase
- TiDB
- Neon

## <https://twitter.com/d151005/status/1716618148055826621>

◆ Next.js (app/RCS/Server Actions)
◆ shadcn/ui & Tailwind CSS - UI
◆ Bun - パッケージマネージャー
◆ Clerk - 認証
  <https://authjs.dev/>もありかも
  <https://next-auth.js.org/>がNext.js用
◆ Resend  - メール送信
◆ Tally  - フォーム
◆ Vercel - ホスティング
◆ Vercel Postgres - DB
◆ Vercel Blob - ストレージ
◆ Prisma - ORM

react email ...emailのhtmlをreactコンポーネントで作れるやつ

## 他参考

- <https://zenn.dev/lovegraph/articles/56f8d5f28ba1c3>
- <https://twitter.com/yusukebe/status/1716768420216332624>
  - 安い

## VRT

- こういうのが安くてクロスブラウザでよさそうかもね <https://speakerdeck.com/kubotak/storybookwoshu-kudakederiguretusiyontesutoga-shi-xing-sarerushi-jie-heyoukoso?slide=57>
  - S3でVRTして料金あんまかけたくないな…
- playwrightのUIモード？でやればstorybookいらないのでは
  - playwrightのVRTは直接リポジトリ内に画像を保存するのが基本かもだけど、S3に置くやり方もあるし、ただS3に置くのが嫌ならもうリポジトリ内に置いちゃって、リポジトリにコミットしちゃうのもありだと思う。そのリポジトリを別リポジトリにして、仮にgit的に重くなってきたらまた新規でリポジトリを作り直すとかすれば。
    - または特定ディレクトリ以下のgit履歴を完全破棄するみたいなことができれば、スクショを入れておくフォルダを定期的にそうやってリセットするとか（できるならば）

## あと

ライブラリのバージョンをrenovateとかdepenadabotとかで上げるの、メジャーバージョンアップ追従or脆弱性対応or「この機能が必要だから今すぐ上げたい」の3種類だけでいいのでは感が出てきた。細かく上げていたらCI代がかかりそう
