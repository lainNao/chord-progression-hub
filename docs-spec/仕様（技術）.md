# 目次

- [技術選定]
  - [セキュリティ技術](#セキュリティ技術)
  - [インフラ技術](#インフラ技術)
  - [バックエンド技術](#バックエンド技術)
  - [フロントエンド技術](#フロントエンド技術)
  - [テスト技術](#テスト技術)

## フロントエンド技術

- [ ] `コンポーネントライブラリ`　・・・chadcn/ui、tailwind(spec-20231220223357)
- [ ] `フォーム`　・・・？（Tally？）(spec-20231220223402)
  - できればreact-hook-formとかは面倒なので使いたくない。やってみて駄目なら使う
- [ ] `APIクライアント`　・・・不要？またはtRPC等(spec-20231220223340)
  - （Next.jsのappルーターだとたぶんRESTは出る幕無いので、たぶん簡単なやつでいい）
- [ ] `可変サイズ`　・・・htmlタグにfont-sizeを設定し、配下では絶対にrem指定をすることで対応。font-sizeだけど、これはrem全体に聞くはずなので、画像サイズとかにも有効にできるはず。ちなみにQaseはそんな感じで実装してるはず(spec-20231221004035)

## テスト技術

- [ ] `VRT`　・・・Chromatic（ただし料金的な意味で、導入はデグレを防ぎたくなってきた時期（完成が見えてから）でいい）(spec-20231220223404)
  - もしR2でreg-suit使えるならreg-suitでもいいかも
- [ ] `E2E`　・・・Playwright(spec-20231220223405)
- [ ] `テストランナー` ・・・jest(spec-20231220223407)
- [ ] `リント`　・・・ESLint、Prettier、ls-lint、stylelint、etc(spec-20231220223408)
- ユーティリティ
  - `typescript-eslint`がeslintはフラットコンフィグをサポートしないとか言ってるらしいので注意しておく
  - [ ] `~.◯◯.ts`などの〇〇の部分に入るやつはls-lintとかでリントかけよう。sつけ忘れや逆にsが多くなるとかで統制取れなくなるから(spec-20231221004150)
- [ ] `Next.jsのルート可視化`　・・・NEXT.NAV(spec-20231220223411)
- [ ] `バンドルサイズ監視`　・・・?(spec-20231221004100)

## バックエンド技術

- [ ] `サーバー`　・・・Remix(spec-20231220223334)
  - Next.js　・・・
    - キャッシュ機構、next/imageなど、Vercel使わないと少し面倒？
    - VercelはAWSに乗ってるので、それならAWS使いたい（というか高いイメージ）
  - Remix　・・・
    - Cloudflare使うならRemixが良さそう。
      - 注意点としてworkersは1MBのリミットがあるっぽいのであまりバンドルサイズの大きいライブラリを使ってはいけない（間に合うのかな、）
      - 有料なら10MB
      - 小さくするのはCIとしてもコスパいいので、やってみたくはある
    - Next.jsはある程度使ったことある
    - ただ、Cloudflare workersをサイズなどの制限で使えないとなった場合、Next.jsにするはず
  - Qwik city　・・・
    - 安さを追求するならこういうパフォーマンスを意識したやつでもありではあるのかも知らんけど
- [ ] `ORM`　・・・Prisma、駄目ならDrizzle、駄目ならKysely(spec-20231220223338)
- [ ] `課金`　・・・？(spec-20231220223347)
- [ ] `ログイン`　・・・？（Clerk？next/auth？）(spec-20231220223350)
- [ ] `メール送信`　・・・AWS SES(spec-20231220223352)
  - 安いらしいので <https://zenn.dev/link/comments/fbe8e9be92ac10>
  - Resend　・・・SESに負けるっぽい？
  - SendGrid　・・・SESに負けるっぽい？
- [ ] `メール本文作成`　・・・react email（emailのhtmlをreactコンポーネントで作れるやつ）(spec-20231220223354)
- [ ] `i18n`　・・・？(spec-20231220223359)
  - なんか色々試されていた <https://twitter.com/d151005/status/1727190995299881006>
  - トップページだけはやっぱりSEO的な意味でサブパスでのルーティングにして国ごとに分けていいのかも…？
  - 全部サブドメインルーティングにするのはしなくていい気がする（手軽ならやっちゃっていいかもだけど）

## セキュリティ技術

- [ ] `DDoS対策`　・・・?(spec-20231220223430)

## インフラ技術

- [ ] `ブルーグリーンデプロイとかの安全なデプロイをどうやるか`(spec-20231220223912)
- [ ] `Git`　・・・GitHub(spec-20231220223235)
- [ ] `CI`　・・・GitHub Actions、Lefthook(spec-20231220223236)
- [ ] `CD`　・・・GitHub Actions、etc(spec-20231220223238)
- [ ] `IaC`　・・・Terraform(spec-20231220223239)
- [ ] `CDN`　・・・Cloudflare(spec-20231220223240)
- [ ] `ドメイン取得`　・・・？(spec-20231220223242)
- [ ] `DNS`　・・・Cloudflare(spec-20231220223243)
- [ ] `ロードバランサー`　・・・?(spec-20231220223244)
- [ ] `ホスティング`　・・・Cloudflare workers(spec-20231220223245)
  - Next.js on Cloud Runにするつもりだったけど、Remixにしたのでworkersで
- [ ] `メール`　・・・？(spec-20231220223250)
- [ ] `ログ`　・・・？(spec-20231220223252)
- [ ] `モニタリング`　・・・？(spec-20231220223253)
- [ ] `バックアップ`　・・・？(spec-20231220223255)
- [ ] `メッセージング`　・・・？(spec-20231220223256)
- [ ] `バッチ・ジョブ`　・・・？(spec-20231220223300)
- [ ] `アクセス解析`　・・・Google Analytics？(spec-20231220223304)
- [ ] `環境分離（本番、ステージング、開発）`　・・・Gitのブランチでdevelop、staging、productionを分ける（mainは不要）。stagingにプッシュされたらステージング環境にデプロイし、productionにプッシュされたら本番環境にデプロイする。でいいかな？(spec-20231220223306)
- データ
- [ ] `DB`　・・・PlanetScale(spec-20231220223309)
  - 安牌っぽい。ChatGPTに見積もってもらったらCloudSQLよりも結構安かった
    - でもTursoと分担してもよいのかも
  - Neon　・・・トランザクションがwebsocketで面倒かも？
  - D1　・・・maximum database sizeが2GBと小さい
  - Turso　・・・sqliteなので特大データで怖いかも。fts5は使いたかったけど、
    - docker使わないでローカル開発できるかもなのは偉くはある
  - PlanetScale　・・・
    - FULLTEXT タイプのインデックス貼ればngramできるっぽいしOK？うーんでもngramでよいものか…
      - これが試して微妙だったらTursoでfts5（tokenize=ascii）を使うかも。試してみてから決めたい
    - コレーションに注意
    - 外部キーは今ベータで対応してるっぽい
  - Digital Ocean　・・・VPS感
  - ScaleGrid　・・・どうなんだろう？
  - HarperDB　・・・どうなんだろう？
- [ ] `DB管理`　・・・bytebase？(spec-20231220223328)
  - 面白そうなので。どうだろう？
- [ ] `ストレージ`　・・・Cloudflare R2(spec-20231220223330)
- [ ] `セッション`　・・・Cloudflare KV? Upstash？(spec-20231220223331)
- [ ] `フォント`　・・・Cloudflare Fonts(spec-20231220223332)
