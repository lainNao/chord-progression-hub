#

## 残検討項目

- wavやmp3からコード進行に変換してくれるオープンソース無いの？
- HMMとか生成AIとか使って「◯◯的なジャンルのコード進行作って」とかしたい
- Slackのような環境設定がほしいな大量の
- 実用的な検索スピードでできそうか
  - 試してみればいい
- 実用的なデータ量（≒料金）でできそうか
  - 計算可能なはず
- 独自マークダウンパーサー、正規表現が大変だからTSで型を作りたいけど、TSの型をランタイムで使えないかな…？
  - zodとかで変換できないかな。他にいいライブラリあればなんでもいいから探したい。
  - 面倒なので正規表現を極めてくれ
- AST上足りないコード表現とかはリクエスト形式にすればいいかな
- そういえば「7(13)」のような表現はできない（そういうのは13に統一）しているけどよいのか。おとなしく文字列にしとけば解決する問題でもないかも

## 機能一覧

- コード進行機能
  - コード進行のCRUD（CSV投稿もいつか）
    - それに対するお気に入りのCRUD
    - それに対するいいねのCRUD
    - それに対するコメントのCRUD
      - それに対するいいねのCRUD
    - それに対するタグのCRUD
    - それに対する掲示板のCRUD
    - それに付随する曲情報のCRUD
      - それに対するタグのCRUD
      - それに付随するアーティスト情報のCRUD
        - それに対するジャンルnoCRUD
    - それに付随する関連アーティスト、関連曲（とコードの見出し）の閲覧
    - コード進行を範囲選択して、その範囲と同じコード進行の曲を検索
- リクエスト（有料or無料での分析orコード進行投稿or公式記事orサイト機能のリクエスト）
  - リクエストのCRUD
    - それに対する回答のCRUD
      - それに対するお礼のCRUD
- 記事機能
  - 記事（公式記事（コードaiみたいなアプリを紹介するとか）or、ユーザー投稿記事）のCRUD
    - それに対するコメントのCRUD
      - それに対するいいねのCRUD
    - それに対するいいねのCRUD
    - それに対するお礼のCRUD
- ユーザー機能
  - アカウント
    - アカウント管理機能（プロフィールや、自分やフォロイーのタイムラインや、他各種CRUD履歴。各種投稿ごとに公開範囲の設定が可能）
    - 他アカウント
      - それに対するフォローのCRUD
      - それに対するバッジのCRUD（称号を与える。メルカリやスプラトゥーンのような）
  - DM機能
    - DMのCRUD
- リスト機能（ユーザーが独自に何個でも作れるタイトルとコメントつきキュレーション。対象はURL、アーティスト、コード進行、など。URLの場合例えば、アーティストがコード進行について語ってるツイートのURLとかYouTubeのURLとか、本のURLとかをイメージしてる。または単純に「◯◯なコード進行の曲リスト」みたいなリストではその曲のYouTubeのURLとか）
  - リストのCRUD
    - それに対するいいねのCRUD
    - それに対するコメントのCRUD

## 補足

1. コード進行の保存形式
    - Q: ある程度独自形式にするか、または直円的な適当な形式での保存を許すかどうか？
      - 独自形式に固定する
      - なぜならそうしないと検索をいい感じにできないと思うから。自分が標準になるんだという勢いでやってしまうしかない
    - 独自形式のパーサーが必要なのが留意。頑張るしかない
      - 最終的にはパーサーをフロントにもリアルタイムに組み込みたいので、バックエンドもTSで統一したい。後で別言語にしてもいいけど。
      - 独自マークダウンにする。
1. コード進行投稿機能
    - 独自形式にしないといけないので、独自のセレクトボックス風コンポーネントを作り、独自形式での入力を強制する
      - パーサーがいい感じなら、マークダウンでの投稿も許すようにできそう。
1. コード進行検索機能
    - いろんな形式での検索をさせたい。
    - なので、DBは検索用にかなり工夫しないといけないかも。
      - 例えば正規化された元データのテーブルと、そのペアになる非正規化された検索用テーブルが必要かも。
        - ここがあまりにもいろんな検索に使えるようにするとデータ量が異様な量になってきそうなのでそこが懸念。
        - いろんな技術を検討したい。
        - Q: データ量的に無理が出るのでは？
          - 無理が出ない方法を探す。別に1曲のコード進行をあらゆる形で検索用データに変換したのを全部データで持ってもそんなに大量のバイト数にはならないだろうから、たぶん問題無さそう…。
          - 仮に料金的に問題出るなら、その分利益があれば問題無くなるという考えもある。
          - パーティション分割とかマテリアライズドビューとかneo4jとかなんでも検討
          - 現行のDBでコード進行検索に使いづらいのならば、自分で専用のアマチュアDB開発してもいい。利益が出れば作り直すとかしたりして。
        - Q: 検索時間がすごいかかるのでは？インデックス効かないのでは
          - 無理が出ない方法を探す。TODO、、、

## 成功させる方法

- ユーザーを集める
  - ツイッターで開発状況を投稿する
- コード進行の投稿を集める
  - n個投稿したら有料機能開放のノルマを作る
- 記事のコメントを集める
  - 各種投稿に対するいいねが多いユーザーはピックアップ
- ユーザビリティを高くする
  - コード進行ページには以下も表示
    - youtubeの検索結果
    - 似ているコード進行の曲
    - 背景色とかをググった検索結果の色を参考にグラデーションさせるなどすればいいのかな
  - 絞り込み機能（アーティスト、コード進行（具体、ディグリー、機能）、雰囲気）は充実させる
  - 見た目はコード進行とメンタルモデルが合う感じにしたい
    - [これ](https://getcssscan.com/css-checkboxes-examples?ref=beautifulboxshadow-bottom) の#58のような、なんか音楽機材のような見た目にすれば良いかも、？（不明）。ザ・ウェブサイトっていうよりも工夫されたスマホアプリ感のある見た目にしたほうがなんかよさそう。あくまでも音楽ツールの一つのような。
- お金関連をよくする
  - リクエスト機能には、「これを満たせばOKですよ」という条件を明記させる。例えば「7thレベルまでは網羅」「イントロからアウトロまで省略しない」とか。
    - 逆に

## 他考慮項目

- DBのスキーマの案はChatGPTにあれこれ相談しながら決めたい
  - どんだけ非正規化するか…（どの単位でテーブルを作るか）
    - 物凄い細分化してしまうなら、1曲の1コードずつレコードを作っていくのも検討したい（曲idカラム、next_chord_idカラムとか持たせて曲の最後まで延々と辿れるイメージ）
    - もちろん最も非正規化されたユーザー入力そのままの状態でも十分検索には使えるのでそのままを保存するテーブルも用意したいし、ディグリー化したものを保存する場所も用意したい
      - ハッシュテーブル的なキャッシュも検討したい
      - 検索要件的に重くならない形にしたい
- クッキー使いますがOK？っていうの実装しないと
- 著作権問題
  - これを見れば、著作権は問題無い＆もし問題あればご連絡という形でよさそう
    - <https://support.chordify.net/hc/en-us/articles/360001420738-Does-this-not-infringe-copyright->
- roman neutralとnashvill number systemがあるらしい。こちらはローマの方でいいと思う
- いずれコードai的なやつと連携したい。chordifyはそれっぽいことしてる
  - それと連携する想定で、コントリビューション内容には修正も含めたい。投稿だけだったら将来的にはAIがやるかもだから
  - Chordify、Chord aiとかぶってる
  - これはこちらのサービスはあくまでも検索＆分析に正確性を持たせてやる立ち位置なので大丈夫かも…？
  - うーん
  - または単に「いずれAIが完全な耳コピや分析ができるようになるまでのつなぎのサービスです」という立ち位置でもいいのかも。今の絵みたいに。
    - 自分が今の時代で使いたいやつだからね
  - または「chord aiとかへのデータ提供の元となるサイトを目指してます」でもいいしね。
    -　逆にその立ち位置で行けばchord aiとの連携が早めにできる可能性もある。
    - コード進行の記述形式のスタンダードの提案という形でも良い。
      - ただしこれは最終的にはMIDIとの連携みたいな感じになると思うけど
  - というわけで他appでまかなえるようになったら用済みで、それまでの自分用途のサイトという立ち位置でいいや
